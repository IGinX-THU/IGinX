name: Standard Test Suite

on:
    pull_request: # when a PR is opened or reopened
        types: [opened, reopened]
        branches:
            - main

concurrency:
    group: "${{ github.workflow }}-${{ github.ref }}"
    cancel-in-progress: true

jobs:
    unit-test:
        uses: ./.github/workflows/unit-test.yml
    unit-mds:
        uses: ./.github/workflows/unit-mds.yml
    case-regression:
        uses: ./.github/workflows/case-regression.yml
        with:
            metadata-matrix: '["zookeeper"]'
    standalone-test:
        uses: ./.github/workflows/standalone-test.yml
        with:
            metadata-matrix: '["zookeeper"]'
            db-matrix: '["Parquet"]'
    standalone-test-pushdown:
        uses: ./.github/workflows/standalone-test-pushdown.yml
        with:
            metadata-matrix: '["zookeeper"]'
            db-matrix: '["Parquet"]'
    db-ce:
        uses: ./.github/workflows/DB-CE.yml
        with:
            metadata-matrix: '["zookeeper"]'
            db-matrix: '["Parquet"]'
    remote-test:
        uses: ./.github/workflows/remote-test.yml
        with:
            metadata-matrix: '["zookeeper"]'
            db-matrix: '["Parquet"]'
    assemebly-test:
        uses: ./.github/workflows/assembly-test.yml
